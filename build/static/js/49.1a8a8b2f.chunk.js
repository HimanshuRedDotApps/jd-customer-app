(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[49],{893:function(e,t,n){"use strict";n.r(t);var a=n(29),c=n.n(a),i=n(99),s=n(83),r=n(0),o=n(214),l=n(587),d=n(922),u=n(519),j=n(522),h=n(115),x=n(914),m=n(623),b=n(596),f=n(589),p=n(539),O=n(529),v=n(317),y=n(568),g=n.n(y),k=n(584),w=n(555),S=n(224),I=n(1);t.default=function(){var e=Object(w.useHistory)(),t=Object(r.useState)([]),n=Object(s.a)(t,2),a=n[0],y=n[1];Object(r.useEffect)((function(){(function(){var e=Object(i.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("api/admin/machine");case 3:200===(t=e.sent).status&&(n=t.data.items,Array.isArray(n)?y(n):console.error("Unexpected response format:",n),console.log(JSON.stringify(n))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching data:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var A=Array.isArray(a)?a.map((function(e){return{key:e.id,ID:e.id,image:e.image||"https://images.unsplash.com/photo-1708616748538-bdd66d6a9e25?q=80&w=1887&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",Customer:e.name,Jobsite:e.Jobsite,Machines:e.machine_detail,ActiveSince:e.ActiveSince,MachineStatus:e.machine_status,OverallStatus:e.OverallStatus}})):[],D=function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,S.a.delete("api/admin/machine/".concat(t,"/delete"));case 4:200===e.sent.status&&(console.log("Deleted successfully"),y((function(e){return e.filter((function(e){return e.id!==t}))}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error deleting row:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),M=function(t){return Object(I.jsxs)(o.a,{children:[Object(I.jsxs)(o.a.Item,{onClick:function(){return e.push("/app/machine-and-sensors/machine-details/".concat(t.ID))},children:[Object(I.jsx)(m.a,{})," View Details"]},"edit"),Object(I.jsxs)(o.a.Item,{onClick:function(){return e.push("/app/machine-and-sensors/sensor-list/".concat(t.ID))},children:[Object(I.jsx)(b.a,{})," View Sensors"]},"viewSensors"),Object(I.jsxs)(o.a.Item,{onClick:function(){return D(t.ID)},children:[Object(I.jsx)(b.a,{})," Delete"]},"delete")]})},C=[{title:"ID",dataIndex:"ID",key:"ID"},{title:"Image",dataIndex:"image",key:"image",render:function(e,t){return Object(I.jsx)(l.a,{src:e,alt:"Avatar for ".concat(t.Customer)})}},{title:"Customer",dataIndex:"Customer",key:"Customer"},{title:"Jobsite",dataIndex:"Jobsite",key:"Jobsite"},{title:"Machines",dataIndex:"Machines",key:"Machines"},{title:"Active Since",dataIndex:"ActiveSince",key:"ActiveSince"},{title:"Machine Status",dataIndex:"MachineStatus",key:"MachineStatus"},{title:"Overall Status",dataIndex:"OverallStatus",key:"OverallStatus"},{title:"Action",key:"action",render:function(e,t){return Object(I.jsx)(d.b,{size:"middle",children:Object(I.jsx)(u.a,{overlay:M(t),placement:"bottomRight",trigger:["hover"],children:Object(I.jsx)(f.a,{})})})}}];return Object(I.jsxs)("div",{children:[Object(I.jsxs)("h4",{children:[Object(I.jsx)(p.a,{})," Machine & Sensors"]}),Object(I.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[Object(I.jsxs)("div",{style:{display:"flex"},children:[Object(I.jsx)(d.b,{direction:"vertical",children:Object(I.jsx)(j.a,{placeholder:"Search",allowClear:!0,onChange:function(e){},style:{width:200},prefix:Object(I.jsx)(O.a,{style:{marginRight:8}})})}),Object(I.jsx)(h.a,{icon:Object(I.jsx)(g.a,{component:v.k}),className:"d-flex align-items-center ml-2",children:"Export"})]}),Object(I.jsx)("div",{className:"mb-2 d-flex align-items-center",children:Object(I.jsx)(h.a,{className:"ml-3 bg-primary d-flex align-items-center rounded text-white font-weight-semibold px-4",children:Object(I.jsx)(k.Link,{to:"machine-and-sensors/add-new",children:"+ Add New"})})})]}),Object(I.jsx)(x.a,{dataSource:A,columns:C})]})}}}]);
//# sourceMappingURL=49.1a8a8b2f.chunk.js.map