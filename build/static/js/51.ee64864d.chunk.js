(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[51],{613:function(e,t,s){"use strict";var a=s(513),c=(s(0),s(1));t.a=e=>Object(c.jsx)(a.a,{overlay:e.filters,placement:"bottomLeft",children:e.children})},912:function(e,t,s){"use strict";s.r(t);var a=s(740),c=s(743),i=s(736),n=s(529),l=s(653),r=s.n(l),d=s(558),o=s(553),j=s(620),h=s(513),m=s(227),b=s(177),x=s(571),O=s(557),u=s(569),p=s(515),y=s(102),g=s(622),v=s(654),_=s.n(v),f=s(215),N=s(313),k=s(613),w=s(0),I=s(219),S=s(574),A=s.n(S),Y=s(1);t.default=()=>{var e;const{id:t}=Object(I.useParams)(),s=(Object(I.useLocation)(),Object(I.useHistory)()),[l,v]=Object(w.useState)("all"),[S,$]=Object(w.useState)([]),[C,D]=Object(w.useState)([]),[M,L]=Object(w.useState)({}),[F,T]=Object(w.useState)(""),z=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",a="?";""!=e&&(a+=`search=${e}&`),""!==s&&"all"!=s&&(a+=`status=${s}`);const c=await f.axiosInstance.get(`/api/web/machines/${t}/sensors${a}`);$(c.data.items),D(c.data.items.map((e=>({id:e.id,image:e.image,sensor_id:e.sensor_id,sensor_type:e.sensor_type,sensor_name:e.sensor_name,sensor_location:e.sensor_location,updated_at:A()(e.updated_at).format("DD-MM-YYYY"),sensor_status:e.sensor_status?"Active":"Inactive"})))),L(c.data.item)};Object(w.useEffect)((()=>{z()}),[]);const J=S.map(((e,t)=>({key:e.id,id:e.id,image:e.image,sensor_id:e.sensor_id,sensor_type:e.sensor_type,sensor_name:e.sensor_name,location:e.sensor_location,last_update_on:A()(e.updated_at).format("DD-MM-YYYY"),status:e.sensor_status}))),B=[{title:"Sr No",dataIndex:"id",key:"id"},{dataIndex:"image",key:"image",render:(e,t)=>Object(Y.jsx)(d.a,{src:e,alt:`Avatar for ${t.organization}`})},{title:"Sensor ID",dataIndex:"sensor_id",key:"sensor_id"},{title:"Sensor Type",dataIndex:"sensor_type",key:"sensor_type"},{title:"Sensor Name",dataIndex:"sensor_name",key:"sensor_name"},{title:"Loction",dataIndex:"location",key:"location"},{title:"Last Update On",dataIndex:"last_update_on",key:"last_update_on"},{title:"Status",dataIndex:"status",key:"status",render:e=>e?Object(Y.jsx)(o.a,{color:"green",children:"Active"}):Object(Y.jsx)(o.a,{color:"red",children:"Inactive"})},{title:"Action",key:"action",render:(e,t)=>Object(Y.jsx)(j.b,{size:"middle",children:Object(Y.jsx)(h.a,{overlay:E(t.id),placement:"bottomRight",trigger:["hover"],children:Object(Y.jsx)(a.a,{})})})}],E=e=>Object(Y.jsxs)(b.a,{children:[Object(Y.jsx)(b.a.Item,{children:Object(Y.jsxs)(I.Link,{style:{width:"100%",display:"block",color:"gray"},to:`edit-sensor/${t}/${e}?machine_name=${M.machine_name}`,children:[Object(Y.jsx)(c.a,{})," Edit"]})},"edit"),Object(Y.jsx)(b.a.Item,{children:Object(Y.jsx)(x.a,{style:{width:"100%",display:"block",color:"gray"},title:"Are you sure to delete this sensor?",description:"Are you sure to delete this sensor?",onConfirm:()=>(async e=>{console.log("is",t);try{const s=await f.axiosInstance.delete(`/api/web/machines/${t}/sensors/${e}`);m.b.success("Sensor delete successfully!"),s.data.status&&z()}catch(s){m.b.error("Failed to delete sensor. Please try again."),console.error("Error:",s)}})(e),onCancel:e=>console.log("cancel",e),okText:"Yes",cancelText:"No",children:Object(Y.jsxs)("div",{children:[Object(Y.jsx)(i.a,{})," Delete"]})})},"delete")]});var H="";const P=Object(Y.jsx)(b.a,{mode:"horizontal",onChange:e=>{console.log(e)},children:Object(Y.jsxs)(_.a,{title:"Status",children:[Object(Y.jsx)(b.a.Item,{children:Object(Y.jsx)(O.a,{onChange:()=>{z(F),v("all")},checked:"all"===l,children:"All"})},"subitem1")," ",Object(Y.jsx)(b.a.Item,{children:Object(Y.jsx)(O.a,{onChange:()=>{z(F,1),v(1)},checked:1==l,children:"Active"})},"subitem2"),Object(Y.jsx)(b.a.Item,{children:Object(Y.jsx)(O.a,{onChange:()=>{z(F,0),v(0)},checked:0===l,children:"Inactive"})},"subitem3")]},"item1")});return Object(Y.jsxs)("div",{children:[Object(Y.jsxs)("div",{className:"rounded bg-white p-3 mb-3",children:[Object(Y.jsxs)("h4",{children:[" ",Object(Y.jsx)(N.t,{}),Object(Y.jsx)("span",{style:{color:"#6a6a6a",fontWeight:"300"},children:" Machines "}),"/ Sensor "]}),Object(Y.jsx)("div",{style:{background:"#FAFAFB"},className:"mb-4 rounded d-flex justify-content-between align-items-start w-100 p-3",children:Object(Y.jsxs)("div",{style:{gap:"10px",width:"80%"},className:"d-flex align-items-start p-3 w-100 justify-content-between",children:[Object(Y.jsxs)("div",{style:{gap:"10px"},className:"d-flex align-items-top",children:[Object(Y.jsx)("div",{children:Object(Y.jsx)(d.a.Group,{size:"large",max:{count:2},children:null===M||void 0===M||null===(e=M.machine_images)||void 0===e?void 0:e.map((e=>Object(Y.jsx)(d.a,{src:e})))})}),Object(Y.jsxs)("div",{className:"ml-4",style:{width:"auto"},children:[Object(Y.jsx)("h5",{className:"m-0",children:"Machine Name"}),Object(Y.jsx)("div",{style:{color:"#0D6CC9"},className:"d-flex align-items-center",children:M.machine_name})]})]}),Object(Y.jsx)(u.a,{style:{height:"60px"},type:"vertical"}),Object(Y.jsx)("div",{children:Object(Y.jsxs)("div",{children:[Object(Y.jsx)("h5",{className:"m-0",children:"Machine ID"}),Object(Y.jsx)("p",{className:"m-0",children:M.machine_id})]})}),Object(Y.jsx)(u.a,{style:{height:"60px"},type:"vertical"}),Object(Y.jsx)("div",{children:Object(Y.jsxs)("div",{children:[Object(Y.jsx)("h5",{className:"m-0",children:"Customer"}),Object(Y.jsxs)("p",{className:"m-0",children:[" ",M.customer_name]})]})}),Object(Y.jsx)(u.a,{style:{height:"60px"},type:"vertical"}),Object(Y.jsx)("div",{children:Object(Y.jsxs)("div",{children:[Object(Y.jsx)("h5",{className:"m-0",children:"Jobsite"}),Object(Y.jsx)("p",{className:"m-0",children:M.Jobsite})]})}),Object(Y.jsx)(u.a,{style:{height:"60px"},type:"vertical"}),Object(Y.jsx)("div",{children:Object(Y.jsxs)("div",{className:"d-flex flex-column align-items-end",children:[M.machine_status?Object(Y.jsx)(o.a,{color:"green",children:"Active"}):Object(Y.jsx)(o.a,{color:"red",children:"Inactive"}),Object(Y.jsx)("p",{className:"",children:`Active Since ${A()(M.active_since).format("DD-MM-YYYY HH:mm")}`})]})})]})})]}),Object(Y.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[Object(Y.jsxs)("div",{className:"",style:{display:"flex"},children:[Object(Y.jsx)(j.b,{direction:"vertical",children:Object(Y.jsx)(p.a,{placeholder:"Search",allowClear:!0,value:F,onChange:e=>{T(e.target.value),clearTimeout(H),H=setTimeout((()=>{z(e.target.value,l)}),500)},style:{width:200},prefix:Object(Y.jsx)(n.a,{style:{marginRight:8}})})}),Object(Y.jsx)(k.a,{filters:P,children:Object(Y.jsx)(y.a,{icon:Object(Y.jsx)(r.a,{component:N.k}),className:"d-flex align-items-center ml-2",children:"Filters"})})]}),Object(Y.jsxs)("div",{className:"mb-2 d-flex align-items-center",children:[Object(Y.jsx)(y.a,{onClick:()=>s.goBack(),className:"ml-3 d-flex align-items-center rounded font-weight-semibold px-4",children:"Back"}),Object(Y.jsx)(y.a,{className:"ml-3 bg-primary d-flex align-items-center rounded text-white font-weight-semibold px-4",children:Object(Y.jsx)(I.Link,{to:`add-new/${t}?machine_name=${M.machine_name}`,children:"+ Add New"})})]})]}),Object(Y.jsx)("div",{children:Object(Y.jsx)(g.a,{columns:B,dataSource:J})})]})}}}]);
//# sourceMappingURL=51.ee64864d.chunk.js.map