(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[42],{1378:function(e,t,a){"use strict";a.r(t);var n=a(179),i=a(572),c=a(228),l=a(515),s=a(556),d=a(102),r=a(620),o=a(553),j=a(612),b=a(527),m=a(707),h=a(540),u=a(533),x=a(716),A=a(0),O=a(45),g=a(679),p=a(517),f=a(646),I=a(39),y=a(316),v=a(130),w=(a(702),a(566)),N=a.n(w),k=a(659),S=a.n(k),E=a(246),T=a(839),C=a(840),F=a(1);t.default=function(){const[e,t]=Object(A.useState)(!1),a=Object(I.useHistory)(),[w,k]=Object(A.useState)(!1),[R,B]=Object(A.useState)(""),[W,K]=Object(A.useState)("all"),{countryList:M}=Object(A.useContext)(E.a),[_,J]=Object(A.useState)([]),[Y,L]=Object(A.useState)([]),U=e=>Object(F.jsxs)(n.a,{children:[Object(F.jsxs)(n.a.Item,{onClick:()=>{a.push(`/app/technician-management/edit/${e}`)},children:[Object(F.jsx)(b.a,{})," Edit"]},"edit"),Object(F.jsx)(i.a,{title:"Are you sure you want to delete this item?",description:"This action cannot be undone.",okText:"Yes",cancelText:"No",onConfirm:()=>P(e),children:Object(F.jsx)(n.a.Item,{children:Object(F.jsxs)("span",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[Object(F.jsx)(g.a,{})," Delete"]})},"delete")})]}),P=async e=>{console.log(e);try{200===(await v.axiosInstance.delete(`api/web/technician/${e}/delete`)).status&&(c.b.success("Technician deleted successfully"),J((t=>t.filter((t=>t.id!==e)))))}catch(t){console.error("Error deleting row:",t)}},Q=[{title:"Id",dataIndex:"id"},{dataIndex:"profile_pic",render:(e,t)=>Object(F.jsx)(F.Fragment,{children:Object(F.jsx)("img",{src:t.profile_pic,style:{width:"20px",height:"20px",borderRadius:"50%"}})})},{title:"Technician Name",dataIndex:"name"},{title:"Gender",dataIndex:"gender",render:(e,t)=>Object(F.jsx)(F.Fragment,{children:1==e?"Male":"Female"})},{title:"Nationality",dataIndex:"nationality",render:(e,t)=>{var a;return e?null===(a=M.find((t=>t.id===e)))||void 0===a?void 0:a.name:"-"}},{title:"Mobile Number",dataIndex:"phone_no",render:(e,t)=>Object(F.jsx)(F.Fragment,{children:t.phone_code+" "+e})},{title:"Email ID",dataIndex:"email"},{title:"Job Assigned",dataIndex:"order_counts"},{title:"Active Jobs",dataIndex:"active_order_counts"},{title:"Status",dataIndex:"status",render:(e,t)=>Object(F.jsx)(F.Fragment,{children:1==e?Object(F.jsx)(o.a,{color:"green",children:"Active"}):Object(F.jsx)(o.a,{color:"red",children:"Inactive"})})},{title:"Action",key:"action",render:(e,t)=>Object(F.jsx)(j.b,{size:"middle",children:Object(F.jsx)(l.a,{overlay:U(t.id),placement:"bottomRight",trigger:["hover"],children:Object(F.jsx)(m.a,{})})})}];var X="";const D=Object(F.jsx)(n.a,{mode:"horizontal",onChange:e=>{console.log(e)},children:Object(F.jsxs)(S.a,{title:"Status",children:[Object(F.jsx)(n.a.Item,{children:Object(F.jsx)(s.a,{onChange:()=>{H(R),K("all")},checked:"all"===W,children:"All"})},"subitem1")," ",Object(F.jsx)(n.a.Item,{children:Object(F.jsx)(s.a,{onChange:()=>{H(R,1),K(1)},checked:1==W,children:"Active"})},"subitem2"),Object(F.jsx)(n.a.Item,{children:Object(F.jsx)(s.a,{onChange:()=>{H(R,0),K(0)},checked:0===W,children:"Inactive"})},"subitem3")]},"item1")}),H=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",a=`?customer_id=${"null"!=localStorage.getItem("parent_id")?localStorage.getItem("parent_id"):localStorage.getItem("user_id")}&search=${e}`;""!==t&&"all"!=t&&(a+=`&status=${t}`),k(!0);const n=await v.axiosInstance.get(`api/web/technician/list${a}`);console.log("res1",n),J(n.data.items),k(!1),L(n.data.items.map((e=>({id:e.id,name:e.name,created_at:N()(e.created_at).format("DD-MM-YYYY"),gender:1==e.gender?"Male":"Female",phone_no:e.phone_code+" "+e.phone_no,email:null===e||void 0===e?void 0:e.email,status:1===e.status?"Active":"Inactive"}))))};return Object(A.useEffect)((()=>{H()}),[]),Object(F.jsxs)("div",{children:[Object(F.jsxs)("h4",{children:[" ",Object(F.jsx)(h.a,{})," Technician Management"]}),Object(F.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[Object(F.jsxs)("div",{className:"",style:{display:"flex"},children:[Object(F.jsx)(j.b,{direction:"vertical",children:Object(F.jsx)(p.a,{placeholder:"Search",allowClear:!0,onChange:e=>{B(e.target.value),clearTimeout(X),X=setTimeout((()=>{H(e.target.value,W)}),500)},style:{width:200},prefix:Object(F.jsx)(u.a,{style:{marginRight:8}})})}),Object(F.jsx)(f.a,{filters:D,children:Object(F.jsx)(d.a,{icon:Object(F.jsx)(x.a,{component:y.i}),className:"d-flex align-items-center ml-2",children:"Filters"})}),Object(F.jsx)(C.a,{header:T.b,data:Y,filename:"Technicians List"})]}),Object(F.jsx)("div",{className:"mb-2 d-flex align-items-center",children:Object(F.jsx)(d.a,{className:"ml-3 bg-primary d-flex align-items-center rounded text-white font-weight-semibold px-4",children:Object(F.jsx)(O.b,{to:"/app/technician-management/addNew",children:"+ Add New"})})})]}),Object(F.jsx)("div",{children:Object(F.jsx)(r.a,{loading:w,columns:Q,dataSource:_})})]})}},646:function(e,t,a){"use strict";var n=a(515),i=(a(0),a(1));t.a=e=>Object(i.jsx)(n.a,{overlay:e.filters,placement:"bottomLeft",children:e.children})},702:function(e,t,a){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIpSURBVHgBnZTBbtNAEEBnHDuJxIHwBTVf0PIFJByS3Ag0RdxoT8Tikn5Bki8IF5RIHJozKZATooCw+wV1vwDnC+oLIm6yHmZXtWu3cSp3pF2Pd3bezuzuLECGVFvdyn1s2rrBFjuUjOBPo/32+U1bfddqFdmWBcWbK5eLl10ieip/ufk8w095EEiQbA6GMAFBp99nY+8WsPm6Y1KINjuY/Oty25FOEJKXDgFN9qom5ni4pFoE1eOFhdbjvhJyZA+WpfN/RmALosGvz2MnyWu2O9WQsHK5KtXK5UWFBJ6RgUdsqsURyj1jwAWn2v9xPB5ADqm3Oz1E7AfL0iNn9t5XES70xY5iE3rNVsfMA2S3OfHHMP6achv0lE2DCWkI9xP9oeqTQ4TUZ6wHOQTlwRB0Y2wKSOj8nI5OIYfwIc0JMQZqWRMbr6yuvMSR3ty13ijAXmc/0tdJJpDTGLK1d6X3iPdXqYhKz6oUPYsXAh0YIFwFCeGAIRdSR41qQuCWvCK5ItQ4EgH6UEEKMOSJEwUX2lepZ0W4KWWfSJWXDNflE/OUjuRIPStC/ar3QEh6KGtTnfLJdPQkmnRyPHoR659Gh6l1kbbl5Sksaa7WiwyNPcvmj5ks9LtEpl0qBmecjQzg8XWEKhMa8AnaXOh2vW3NNKTzTTB+ILYRg335nBVgFWeTqjP1hK3giJ+oKtwtPu+lW0Bx+G360V0LTMqzl++2NtF+f/kwXzf+HxPU5qLsLRDQAAAAAElFTkSuQmCC"},839:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i}));const n=[{label:"Id",key:"id"},{label:"Technician Name",key:"name"},{label:"Gender",key:"gender"},{label:"Mobile Number",key:"phone_no"},{label:"Email ID",key:"email"},{label:"Status",key:"status"}],i=[{label:"Id",key:"id"},{label:"Jobsite Name",key:"name"},{label:"Area",key:"area"},{label:"Mobile Number",key:"phone_no"},{label:"Created On",key:"created_at"},{label:"Status",key:"status"}]},840:function(e,t,a){"use strict";a(0);var n=a(841),i=a(102),c=a(716),l=a(316),s=a(1);t.a=e=>{const{header:t,data:a,filename:d}=e;return Object(s.jsx)(n.CSVLink,{headers:t,data:a,filename:d,children:Object(s.jsxs)(i.a,{className:"d-flex align-items-center ml-2",children:[Object(s.jsx)(c.a,{className:"mr-2",component:l.e}),"Export"]})})}}}]);
//# sourceMappingURL=42.f310895d.chunk.js.map