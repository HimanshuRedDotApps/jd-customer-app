(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[52],{653:function(e,t,a){"use strict";var s=a(131),l=a(248),i=a(0),n=a(1);t.a=function(e){let{value:t,onChange:a}=e;const{countryList:c}=Object(i.useContext)(l.a);return Object(n.jsx)(s.a,{showSearch:!0,value:t,onChange:a,filterOption:(e,t)=>t.children.toLowerCase().includes(e.toLowerCase()),placeholder:"Search and select a country",children:c.map((e=>Object(n.jsx)(s.a.Option,{value:e.id,children:e.name},e.id)))})}},938:function(e,t,a){"use strict";a.r(t);var s=a(538),l=a(764),i=a(664),n=a(646),c=a(659),r=a(618),o=a(225),d=a(569),j=a(516),u=a(131),h=a(104),m=a(106),b=a(681),p=a(130),x=a(315),O=a.p+"static/media/uploadDocument.da51422a.svg",g=a(0),y=a.n(g),f=a(219),w=a(653),v=a(1);t.default=function(){const[e]=r.a.useForm(),[t,a]=y.a.useState([]),[I,S]=y.a.useState([]),[_,N]=y.a.useState([]),[F,k]=y.a.useState([]),[P,A]=y.a.useState(""),[M,q]=y.a.useState(""),[H,z]=y.a.useState([]),[D,E]=Object(g.useState)([]),T=Object(f.useHistory)();return Object(g.useEffect)((()=>{(async()=>{try{const e=await p.axiosInstance.get(`/api/web/jobsites?customer_id=${"null"!=localStorage.getItem("parent_id")?localStorage.getItem("parent_id"):localStorage.getItem("user_id")}&status=1`);a(e.data.items)}catch(e){console.log(e),o.b.error("Something went wrong")}})(),(async()=>{try{const e=await p.axiosInstance.get(`api/web/machines?customer_id=${"null"!=localStorage.getItem("parent_id")?localStorage.getItem("parent_id"):localStorage.getItem("user_id")}&status=1`);if(200===e.status){const t=e.data.items;Array.isArray(t)?S(t):console.error("Unexpected response format:",t)}}catch(e){console.error("Error fetching data:",e)}})(),(async()=>{const e=await p.axiosInstance.get(`api/web/technician/list?customer_id=${"null"!=localStorage.getItem("parent_id")?localStorage.getItem("parent_id"):localStorage.getItem("user_id")}&status=1`);console.log("res1",e),N(e.data.items)})(),(async()=>{const e=await p.axiosInstance.get("api/admin/workshop-user/list?status=1");k(e.data.items)})()}),[]),Object(v.jsxs)("div",{children:[Object(v.jsxs)("h4",{children:[" ",Object(v.jsx)(s.a,{}),Object(v.jsxs)("span",{style:{color:"#6a6a6a",fontWeight:"300"},children:[" ","Order Management"]})," ","/ Create New Order"," "]}),Object(v.jsx)(d.a,{children:Object(v.jsxs)(r.a,{form:e,layout:"vertical",onFinish:async e=>{if(0===H.length)return void o.b.error("Please add machine fault");let t=[];const a=D.filter((e=>void 0===e.url)),s=D.filter((e=>void 0!==e.url));if(0!==a.length){const e=a.map((async e=>{if(void 0===e.url){return await O(e)}return e.url}));t=await Promise.all(e),console.log(t)}t=[...t,...s.map((e=>e.url))];try{const a=await p.axiosInstance.post("api/web/orders",{...e,machine_faults:H,files:t,model:I.find((t=>t.id===e.machine_id)).model,status:0});200===a.status&&(console.log("response",a),o.b.success("Order created successfully"),T.push("/app/order-management"))}catch(l){console.error("Error fetching data:",l)}},style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[Object(v.jsx)(r.a.Item,{rules:[{required:!0,message:"Please input Company Name!"}],style:{width:"45%"},label:"Company Name",name:"company_name",children:Object(v.jsx)(j.a,{})}),Object(v.jsx)(r.a.Item,{style:{width:"45%"},label:"Job Site Name",name:"job_site_id",rules:[{required:!0,message:"Please input Job Site Name!"}],children:Object(v.jsx)(u.a,{children:t.map((e=>Object(v.jsx)(b.Option,{value:e.id,children:e.jobsite_name})))})}),Object(v.jsx)(r.a.Item,{rules:[{required:!0,message:"Please input Postal Code!"},{pattern:new RegExp(/^[0-9\b]+$/),message:"Please enter valid postal code"}],style:{width:"45%"},label:"Postal Code",name:"postal_code",children:Object(v.jsx)(j.a,{})}),Object(v.jsx)(r.a.Item,{rules:[{required:!0,message:"Please input Block Number!"}],style:{width:"45%"},label:"Block Number",name:"block_number",children:Object(v.jsx)(j.a,{})}),Object(v.jsx)(r.a.Item,{style:{width:"45%"},label:"Street Number",name:"street_number",rules:[{required:!0,message:"Please input Street Number!"}],children:Object(v.jsx)(j.a,{})}),Object(v.jsx)(r.a.Item,{style:{width:"45%"},label:"Level Number",name:"level_number",rules:[{required:!0,message:"Please input Level Number!"}],children:Object(v.jsx)(j.a,{})}),Object(v.jsx)(r.a.Item,{style:{width:"45%"},label:"Unit Number",name:"unit_number",rules:[{required:!0,message:"Please input Unit Number!"},{pattern:new RegExp(/^[0-9\b]+$/),message:"Please enter valid unit number"}],children:Object(v.jsx)(j.a,{})}),Object(v.jsx)(r.a.Item,{style:{width:"45%"},label:"Country",name:"country",rules:[{required:!0,message:"Please input Country!"}],children:Object(v.jsx)(w.a,{})}),Object(v.jsx)(r.a.Item,{style:{width:"45%"},label:"Maintenance Service Type",name:"maintenance_service_type",rules:[{required:!0,message:"Please input Maintenance Service Type!"}],children:Object(v.jsxs)(u.a,{onChange:e=>{A(e)},children:[Object(v.jsx)(b.Option,{value:"Onsite",children:"Onsite"}),Object(v.jsx)(b.Option,{value:"Workshop",children:"Workshop"})]})}),"Onsite"===P?Object(v.jsx)(r.a.Item,{style:{width:"45%"},label:"Technician",name:"technician_id",rules:[{required:!0,message:"Please select Technician!"}],children:Object(v.jsx)(u.a,{children:_.map((e=>Object(v.jsx)(b.Option,{value:e.id,children:e.name})))})}):"Workshop"===P?Object(v.jsx)(r.a.Item,{style:{width:"45%"},label:"Workshop",name:"workshop_id",rules:[{required:!0,message:"Please Select Workshop!"}],children:Object(v.jsx)(u.a,{children:F.map((e=>Object(v.jsx)(b.Option,{value:e.id,children:e.name})))})}):null,Object(v.jsx)(r.a.Item,{style:{width:"45%"},label:"Machine",name:"machine_id",rules:[{required:!0,message:"Please input Machine!"}],children:Object(v.jsx)(u.a,{children:I.map((e=>Object(v.jsxs)(b.Option,{value:e.id,children:[e.name," | ",e.model]})))})}),Object(v.jsxs)(r.a.Item,{style:{width:"100%"},label:"Machine Fault",children:[Object(v.jsxs)("div",{style:{display:"flex",gap:"5px"},children:[Object(v.jsx)(j.a,{value:M,onChange:e=>{q(e.target.value)}}),Object(v.jsx)(h.a,{type:"primary",onClick:()=>{z([...H,{sNo:H.length+1,fault:M}]),q("")},children:Object(v.jsx)(l.a,{})})]}),H.length>0?H.map((e=>Object(v.jsx)(d.a,{style:{marginTop:"10px"},children:Object(v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(v.jsx)("div",{children:e.fault}),Object(v.jsx)("div",{onClick:()=>{z(H.filter((t=>t.sNo!==e.sNo)))},style:{color:"red",cursor:"pointer"},children:Object(v.jsx)(i.a,{})})]})}))):Object(v.jsx)(d.a,{style:{marginTop:"10px"},children:Object(v.jsx)(m.a,{})})]}),Object(v.jsx)(r.a.Item,{style:{width:"45%"},label:"Fault Details",name:"fault_details",rules:[{required:!0,message:"Please input Fault Details!"}],children:Object(v.jsx)(j.a.TextArea,{})}),Object(v.jsxs)("div",{style:{width:"100%"},children:[Object(v.jsx)("h2",{children:"Attachment"}),Object(v.jsxs)("div",{className:"border bg-white rounded p-3 mt-4",children:[Object(v.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center position-relative uploaddoc",children:[Object(v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",fill:"none",viewBox:"0 0 64 64",children:[Object(v.jsx)("path",{fill:"#3CA6C1",d:"M18.57 15.51l7.86 7a2 2 0 001.33.51H56v34.9A2.93 2.93 0 0153.26 61H5.74A2.93 2.93 0 013 57.92V18a2.85 2.85 0 012.68-3h11.56a2 2 0 011.33.51z"}),Object(v.jsx)("path",{fill:"#D7E6EF",d:"M49 57H7V3h42v54z"}),Object(v.jsx)("path",{fill:"#3CA6C1",d:"M45 23h16v-6a2 2 0 00-2-2h-6l-8 8z"}),Object(v.jsx)("path",{fill:"#F7FCFF",d:"M14 9h42v14H14V9z"}),Object(v.jsx)("path",{fill:"#3CA6C1",d:"M25.69 15.51l7.42 7a1.8 1.8 0 001.25.51H61v34.9A2.87 2.87 0 0158.41 61H13.59A2.87 2.87 0 0111 57.92V18a2.79 2.79 0 012.53-3h10.9c.47 0 .922.184 1.26.51z"}),Object(v.jsx)("path",{fill:"#F7FCFF",d:"M36 55c7.18 0 13-5.82 13-13s-5.82-13-13-13-13 5.82-13 13 5.82 13 13 13z"}),Object(v.jsx)("path",{fill:"#D7E6EF",d:"M52 13H32a1 1 0 000 2h20a1 1 0 000-2zm0 4H37a1 1 0 000 2h15a1 1 0 000-2z"}),Object(v.jsx)("path",{fill:"#44394A",d:"M36.5 49.28l6.72-6.72a5.501 5.501 0 00-7.78-7.78l-8.84 8.84a1.002 1.002 0 000 1.42A1 1 0 0028 45l8.84-8.84a3.5 3.5 0 114.95 4.95l-6.71 6.71a1.998 1.998 0 01-3.38-.571A2 2 0 0132.26 45L39 38.32a.5.5 0 01.71 0 .48.48 0 010 .71l-6 6a1 1 0 101.42 1.41l6-6a2.503 2.503 0 00-3.54-3.54l-6.72 6.72a4 4 0 000 5.66 4.003 4.003 0 005.66 0h-.03z"})]}),Object(v.jsx)("h5",{className:"mb-0 mt-2",children:"Drag & Drop Files Here"}),Object(v.jsx)("h5",{className:"mb-0",children:"Or"}),Object(v.jsx)("h5",{className:"mb-0",style:{color:"#3CA6C1"},children:"Choosen File"}),Object(v.jsx)("input",{style:C.uploadFile,className:"uploadFile",type:"file",multiple:!0,onChange:function(e){const t=e.target.files,a=[];for(let s=0;s<t.length;s++)a.push(t[s]);E([...D,a[0]])}})]}),Object(v.jsx)("div",{className:"mt-4",children:D.length>0&&Object(v.jsx)("ul",{className:"p-0",style:{width:"40%"},children:D.map(((e,t)=>Object(v.jsxs)("li",{className:"my-3",style:C.files,children:[" ",Object(v.jsxs)("div",{className:"d-flex align-items-center",children:[Object(v.jsx)(x.G,{})," ",Object(v.jsxs)("span",{className:"ml-2",children:[e.name," "]})," ",Object(v.jsx)("span",{className:"ml-5",children:e.url?Object(v.jsx)(n.a,{style:{cursor:"pointer"},onClick:()=>window.open(e.url)}):null})]}),Object(v.jsxs)("span",{style:{cursor:"pointer"},onClick:()=>(e=>{let t=D.filter(((t,a)=>a!==e));E(t)})(t),children:[" ",Object(v.jsx)(c.a,{})," "]})]},e.name)))})})]})]}),Object(v.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%",marginTop:"10px"},children:Object(v.jsx)(r.a.Item,{children:Object(v.jsx)(h.a,{type:"primary",htmlType:"submit",children:"Submit"})})})]})})]})};let C={files:{listStyle:"none",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"13px",border:"1px solid lightblue",padding:"10px",borderRadius:"9px",background:"#0093ff0a"},uploadFile:{position:"absolute",width:"100%",height:"100%",opacity:0},".uploadFile::-webkit-file-upload-button":{visibility:"hidden"},".uploadFile::before":{content:"'Drag & Drop'",display:"inline-block",padding:"10px",border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer"},".uploadFile:hover::before":{backgroundColor:"#ccc"}}}}]);
//# sourceMappingURL=52.86c59fe9.chunk.js.map