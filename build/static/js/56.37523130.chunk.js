(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[56],{935:function(e,t,s){"use strict";s.r(t);var a=s(537),l=s(762),i=s(737),n=s(661),c=s(732),r=s(635),o=s(224),d=s(577),j=s(516),b=s(130),u=s(104),h=s(106),m=s(730),p=s(212),x=s(314),O=s.p+"static/media/uploadDocument.da51422a.svg",y=s(0),g=s.n(y),f=s(218),w=s(1);t.default=function(){const[e]=r.a.useForm(),[t,s]=g.a.useState([]),[C,N]=g.a.useState([]),[I,F]=g.a.useState([]),[S,k]=g.a.useState([]),[_,P]=g.a.useState(""),[A,M]=g.a.useState(""),[q,H]=g.a.useState([]),[z,D]=Object(y.useState)([]),E=Object(f.useHistory)();return Object(y.useEffect)((()=>{(async()=>{try{const e=await p.axiosInstance.get("/api/web/jobsites?status=1");s(e.data.items)}catch(e){console.log(e),o.b.error("Something went wrong")}})(),(async()=>{try{const e=await p.axiosInstance.get("api/web/machines");if(200===e.status){const t=e.data.items;Array.isArray(t)?N(t):console.error("Unexpected response format:",t)}}catch(e){console.error("Error fetching data:",e)}})(),(async()=>{const e=await p.axiosInstance.get(`api/web/technician/list?customer_id=${localStorage.getItem("parent_id")||localStorage.getItem("user_id")}&status=1`);console.log("res1",e),F(e.data.items)})(),(async()=>{const e=await p.axiosInstance.get("api/admin/workshop-user/list?status=1");k(e.data.items)})()}),[]),Object(w.jsxs)("div",{children:[Object(w.jsxs)("h4",{children:[" ",Object(w.jsx)(a.a,{}),Object(w.jsxs)("span",{style:{color:"#6a6a6a",fontWeight:"300"},children:[" ","Order Management"]})," ","/ Create New Order"," "]}),Object(w.jsx)(d.a,{children:Object(w.jsxs)(r.a,{form:e,layout:"vertical",onFinish:async e=>{if(0===q.length)return void o.b.error("Please add machine fault");let t=[];const s=z.filter((e=>void 0===e.url)),a=z.filter((e=>void 0!==e.url));if(0!==s.length){const e=s.map((async e=>{if(void 0===e.url){return await O(e)}return e.url}));t=await Promise.all(e),console.log(t)}t=[...t,...a.map((e=>e.url))];try{const s=await p.axiosInstance.post("api/web/orders",{...e,machine_faults:q,files:t,model:C.find((t=>t.id===e.machine_id)).model,status:0});200===s.status&&(console.log("response",s),o.b.success("Order created successfully"),E.push("/app/order-management"))}catch(l){console.error("Error fetching data:",l)}},style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[Object(w.jsx)(r.a.Item,{rules:[{required:!0,message:"Please input Company Name!"}],style:{width:"45%"},label:"Company Name",name:"company_name",children:Object(w.jsx)(j.a,{})}),Object(w.jsx)(r.a.Item,{style:{width:"45%"},label:"Job Site Name",name:"job_site_id",rules:[{required:!0,message:"Please input Job Site Name!"}],children:Object(w.jsx)(b.a,{children:t.map((e=>Object(w.jsx)(m.Option,{value:e.id,children:e.jobsite_name})))})}),Object(w.jsx)(r.a.Item,{rules:[{required:!0,message:"Please input Postal Code!"},{pattern:new RegExp(/^[0-9\b]+$/),message:"Please enter valid postal code"}],style:{width:"45%"},label:"Postal Code",name:"postal_code",children:Object(w.jsx)(j.a,{})}),Object(w.jsx)(r.a.Item,{rules:[{required:!0,message:"Please input Block Number!"}],style:{width:"45%"},label:"Block Number",name:"block_number",children:Object(w.jsx)(j.a,{})}),Object(w.jsx)(r.a.Item,{style:{width:"45%"},label:"Street Number",name:"street_number",rules:[{required:!0,message:"Please input Street Number!"}],children:Object(w.jsx)(j.a,{})}),Object(w.jsx)(r.a.Item,{style:{width:"45%"},label:"Level Number",name:"level_number",rules:[{required:!0,message:"Please input Level Number!"}],children:Object(w.jsx)(j.a,{})}),Object(w.jsx)(r.a.Item,{style:{width:"45%"},label:"Unit Number",name:"unit_number",rules:[{required:!0,message:"Please input Unit Number!"},{pattern:new RegExp(/^[0-9\b]+$/),message:"Please enter valid unit number"}],children:Object(w.jsx)(j.a,{})}),Object(w.jsx)(r.a.Item,{style:{width:"45%"},label:"Country",name:"country",rules:[{required:!0,message:"Please input Country!"}],children:Object(w.jsxs)(b.a,{children:[Object(w.jsx)(m.Option,{value:"155",children:"Singapore"}),Object(w.jsx)(m.Option,{value:"75",children:"India"})]})}),Object(w.jsx)(r.a.Item,{style:{width:"45%"},label:"Maintenance Service Type",name:"maintenance_service_type",rules:[{required:!0,message:"Please input Maintenance Service Type!"}],children:Object(w.jsxs)(b.a,{onChange:e=>{P(e)},children:[Object(w.jsx)(m.Option,{value:"Onsite",children:"Onsite"}),Object(w.jsx)(m.Option,{value:"Workshop",children:"Workshop"})]})}),"Onsite"===_?Object(w.jsx)(r.a.Item,{style:{width:"45%"},label:"Technician",name:"technician_id",rules:[{required:!0,message:"Please select Technician!"}],children:Object(w.jsx)(b.a,{children:I.map((e=>Object(w.jsx)(m.Option,{value:e.id,children:e.name})))})}):"Workshop"===_?Object(w.jsx)(r.a.Item,{style:{width:"45%"},label:"Workshop",name:"workshop_id",rules:[{required:!0,message:"Please Select Workshop!"}],children:Object(w.jsx)(b.a,{children:S.map((e=>Object(w.jsx)(m.Option,{value:e.id,children:e.name})))})}):null,Object(w.jsx)(r.a.Item,{style:{width:"45%"},label:"Machine",name:"machine_id",rules:[{required:!0,message:"Please input Machine!"}],children:Object(w.jsx)(b.a,{children:C.map((e=>Object(w.jsxs)(m.Option,{value:e.id,children:[e.name," | ",e.model]})))})}),Object(w.jsxs)(r.a.Item,{style:{width:"100%"},label:"Machine Fault",children:[Object(w.jsxs)("div",{style:{display:"flex",gap:"5px"},children:[Object(w.jsx)(j.a,{value:A,onChange:e=>{M(e.target.value)}}),Object(w.jsx)(u.a,{type:"primary",onClick:()=>{H([...q,{sNo:q.length+1,fault:A}]),M("")},children:Object(w.jsx)(l.a,{})})]}),q.length>0?q.map((e=>Object(w.jsx)(d.a,{style:{marginTop:"10px"},children:Object(w.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(w.jsx)("div",{children:e.fault}),Object(w.jsx)("div",{onClick:()=>{H(q.filter((t=>t.sNo!==e.sNo)))},style:{color:"red",cursor:"pointer"},children:Object(w.jsx)(i.a,{})})]})}))):Object(w.jsx)(d.a,{style:{marginTop:"10px"},children:Object(w.jsx)(h.a,{})})]}),Object(w.jsx)(r.a.Item,{style:{width:"45%"},label:"Fault Details",name:"fault_details",rules:[{required:!0,message:"Please input Fault Details!"}],children:Object(w.jsx)(j.a.TextArea,{})}),Object(w.jsxs)("div",{style:{width:"100%"},children:[Object(w.jsx)("h2",{children:"Attachment"}),Object(w.jsxs)("div",{className:"border bg-white rounded p-3 mt-4",children:[Object(w.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center position-relative uploaddoc",children:[Object(w.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",fill:"none",viewBox:"0 0 64 64",children:[Object(w.jsx)("path",{fill:"#3CA6C1",d:"M18.57 15.51l7.86 7a2 2 0 001.33.51H56v34.9A2.93 2.93 0 0153.26 61H5.74A2.93 2.93 0 013 57.92V18a2.85 2.85 0 012.68-3h11.56a2 2 0 011.33.51z"}),Object(w.jsx)("path",{fill:"#D7E6EF",d:"M49 57H7V3h42v54z"}),Object(w.jsx)("path",{fill:"#3CA6C1",d:"M45 23h16v-6a2 2 0 00-2-2h-6l-8 8z"}),Object(w.jsx)("path",{fill:"#F7FCFF",d:"M14 9h42v14H14V9z"}),Object(w.jsx)("path",{fill:"#3CA6C1",d:"M25.69 15.51l7.42 7a1.8 1.8 0 001.25.51H61v34.9A2.87 2.87 0 0158.41 61H13.59A2.87 2.87 0 0111 57.92V18a2.79 2.79 0 012.53-3h10.9c.47 0 .922.184 1.26.51z"}),Object(w.jsx)("path",{fill:"#F7FCFF",d:"M36 55c7.18 0 13-5.82 13-13s-5.82-13-13-13-13 5.82-13 13 5.82 13 13 13z"}),Object(w.jsx)("path",{fill:"#D7E6EF",d:"M52 13H32a1 1 0 000 2h20a1 1 0 000-2zm0 4H37a1 1 0 000 2h15a1 1 0 000-2z"}),Object(w.jsx)("path",{fill:"#44394A",d:"M36.5 49.28l6.72-6.72a5.501 5.501 0 00-7.78-7.78l-8.84 8.84a1.002 1.002 0 000 1.42A1 1 0 0028 45l8.84-8.84a3.5 3.5 0 114.95 4.95l-6.71 6.71a1.998 1.998 0 01-3.38-.571A2 2 0 0132.26 45L39 38.32a.5.5 0 01.71 0 .48.48 0 010 .71l-6 6a1 1 0 101.42 1.41l6-6a2.503 2.503 0 00-3.54-3.54l-6.72 6.72a4 4 0 000 5.66 4.003 4.003 0 005.66 0h-.03z"})]}),Object(w.jsx)("h5",{className:"mb-0 mt-2",children:"Drag & Drop Files Here"}),Object(w.jsx)("h5",{className:"mb-0",children:"Or"}),Object(w.jsx)("h5",{className:"mb-0",style:{color:"#3CA6C1"},children:"Choosen File"}),Object(w.jsx)("input",{style:v.uploadFile,className:"uploadFile",type:"file",multiple:!0,onChange:function(e){const t=e.target.files,s=[];for(let a=0;a<t.length;a++)s.push(t[a]);D([...z,s[0]])}})]}),Object(w.jsx)("div",{className:"mt-4",children:z.length>0&&Object(w.jsx)("ul",{className:"p-0",style:{width:"40%"},children:z.map(((e,t)=>Object(w.jsxs)("li",{className:"my-3",style:v.files,children:[" ",Object(w.jsxs)("div",{className:"d-flex align-items-center",children:[Object(w.jsx)(x.G,{})," ",Object(w.jsxs)("span",{className:"ml-2",children:[e.name," "]})," ",Object(w.jsx)("span",{className:"ml-5",children:e.url?Object(w.jsx)(n.a,{style:{cursor:"pointer"},onClick:()=>window.open(e.url)}):null})]}),Object(w.jsxs)("span",{style:{cursor:"pointer"},onClick:()=>(e=>{let t=z.filter(((t,s)=>s!==e));D(t)})(t),children:[" ",Object(w.jsx)(c.a,{})," "]})]},e.name)))})})]})]}),Object(w.jsx)(r.a.Item,{children:Object(w.jsx)(u.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})})]})};let v={files:{listStyle:"none",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"13px",border:"1px solid lightblue",padding:"10px",borderRadius:"9px",background:"#0093ff0a"},uploadFile:{position:"absolute",width:"100%",height:"100%",opacity:0},".uploadFile::-webkit-file-upload-button":{visibility:"hidden"},".uploadFile::before":{content:"'Drag & Drop'",display:"inline-block",padding:"10px",border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer"},".uploadFile:hover::before":{backgroundColor:"#ccc"}}}}]);
//# sourceMappingURL=56.37523130.chunk.js.map