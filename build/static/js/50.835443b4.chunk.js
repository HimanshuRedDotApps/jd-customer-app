(this.webpackJsonpemilus=this.webpackJsonpemilus||[]).push([[50],{736:function(e,t,a){"use strict";var s=a(239),n=a.n(s),r=a(11),o=a(751).a(),i=a(31),c=a(225);const l=n.a.create({baseURL:r.a,timeout:6e4}),d="/auth/login";l.interceptors.request.use((e=>{const t=localStorage.getItem(i.b);return t&&(e.headers.authorization=t),t||e.headers["public-request"]||(o.push(d),window.location.reload()),e}),(e=>{c.a.error({message:"Error"}),Promise.reject(e)})),l.interceptors.response.use((e=>e.data),(e=>{let t={message:""};return 400!==e.response.status&&403!==e.response.status||(t.message="Authentication Fail",t.description="Please login again",localStorage.removeItem(i.b),o.push(d),window.location.reload()),404===e.response.status&&(t.message="Not Found"),500===e.response.status&&(t.message="Internal Server Error"),508===e.response.status&&(t.message="Time Out"),c.a.error(t),Promise.reject(e)}));var m=l;const u={login:function(e){return m({url:"/posts",method:"post",headers:{"public-request":"true"},data:e})},signUp:function(e){return m({url:"/auth/signup",method:"post",headers:{"public-request":"true"},data:e})}};t.a=u},755:function(e,t,a){"use strict";var s=a(0),n=a.n(s),r=a(37),o=a(570),i=a(104),c=a(592),l=a(635),d=a(516),m=a(896),u=a(314),h=a(743),b=a(1);var g=n.a.forwardRef(((e,t)=>Object(b.jsx)(h.a,{component:e.svg,className:e.className}))),j=a(54),p=a(736),x=a(39),O=a(754);const v=e=>{let t=Object(x.useHistory)();const{otherSignIn:a,showForgetPassword:n,hideAuthMessage:r,onForgetPasswordClick:h,showLoading:j,extra:v,loading:y,showMessage:w,message:f,authenticated:N,showAuthMessage:S,token:I,redirect:k,allowRedirect:C}=e;Object(s.useEffect)((()=>{null!==I&&C&&t.push(k),w&&setTimeout((()=>{r()}),3e3)}));const P=Object(b.jsxs)("div",{children:[Object(b.jsx)(o.a,{children:Object(b.jsx)("span",{className:"text-muted font-size-base font-weight-normal",children:"or connect with"})}),Object(b.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(b.jsx)(i.a,{onClick:()=>{j()},className:"mr-2",disabled:y,icon:Object(b.jsx)(g,{svg:u.l}),children:"Google"}),Object(b.jsx)(i.a,{onClick:()=>{j()},icon:Object(b.jsx)(g,{svg:u.j}),disabled:y,children:"Facebook"})]})]});return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(O.a.div,{initial:{opacity:0,marginBottom:0},animate:{opacity:w?1:0,marginBottom:w?20:0},children:Object(b.jsx)(c.a,{type:"error",showIcon:!0,message:f})}),Object(b.jsxs)(l.a,{layout:"vertical",name:"login-form",onFinish:e=>{j();p.a.login(e).then((e=>{N("fakeToken")})).then((e=>{S(e)}))},children:[Object(b.jsx)(l.a.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please input your email"},{type:"email",message:"Please enter a validate email!"}],children:Object(b.jsx)(d.a,{prefix:Object(b.jsx)(m.a,{className:"text-primary"})})}),Object(b.jsx)(l.a.Item,{children:Object(b.jsx)(i.a,{type:"primary",htmlType:"submit",block:!0,loading:y,children:"Sign In"})}),a?P:null,v]})]})};v.defaultProps={otherSignIn:!0,showForgetPassword:!1};const y={showAuthMessage:j.c,showLoading:j.d,hideAuthMessage:j.b,authenticated:j.a};t.a=Object(r.b)((e=>{let{auth:t}=e;const{loading:a,message:s,showMessage:n,token:r,redirect:o}=t;return{loading:a,message:s,showMessage:n,token:r,redirect:o}}),y)(v)},801:function(e,t,a){"use strict";a.r(t);var s=a(0),n=(a(755),a(130)),r=a(635),o=a(224),i=a(516),c=a(104),l=a(636),d=a(519),m=a(513),u=a(37),h=a.p+"static/media/Logo.395390b5.svg",b=a(766),g=a(314),j=a(794),p=a.n(j),x=(a(797),a(798),a(799)),O=a.n(x),v=a(212),y=a(800);a(802);var w={apiKey:"AIzaSyBW4y5A8HAiboG6UJjtlj9sMUc0Zuh-Ns0",authDomain:"jdworks-49200.firebaseapp.com",projectId:"jdworks-49200",storageBucket:"jdworks-49200.firebasestorage.app",messagingSenderId:"997372637377",appId:"1:997372637377:web:cf324cadf69546016de440",measurementId:"G-QVDVQPRZLT"};const f=Object(y.a)(w);Object(b.b)(f);var N=a(594),S=a(896),I=a(1);const k={backgroundImage:"url(/img/others/wave.svg)",backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"top",backgroundColor:"white"},C={position:"absolute",top:"1rem",left:"1rem"},{Option:P}=n.a;t.default=e=>{Object(u.c)((e=>e.theme.currentTheme));const[t,a]=Object(s.useState)(1),[b]=r.a.useForm(),[j,x]=Object(s.useState)(""),[y,w]=Object(s.useState)("+65"),[f,T]=Object(s.useState)(!1),R=Object(N.useHistory)(),[A,F]=Object(s.useState)(""),[E,z]=Object(s.useState)([]),[_,q]=Object(s.useState)(!1),[M,B]=Object(s.useState)("");Object(s.useEffect)((()=>{localStorage.getItem("token")&&R.push("/app")}));const G=Object(I.jsxs)(n.a,{onChange:e=>{w(e)},value:y,style:{width:80},children:[Object(I.jsx)(P,{value:"+91",children:"IND"}),Object(I.jsx)(P,{value:"+65",children:"SG"})]});const L=async()=>{if(F(""),j.length<8)o.b.error("Please enter a valid phone number");else try{const e=await v.axiosInstance.post("/api/app/auth/checkByNumber",{phoneCode:y,phoneNo:j});1==e.data.item.success?U({phoneCode:y,phoneNo:j}):T(!0),console.log(e.data)}catch(e){console.log(e),o.b.error("You are not registered. Please sign up"),T(!0)}},U=async e=>{try{var t;const l=await v.axiosInstance.post("/api/web/auth/login",{...e});var a,s,n,r,i,c;if(console.log(l.data),null===(t=l.data.item.token)||void 0===t?void 0:t.token)o.b.success("Logged in successfully"),console.log(l.data.item.user),localStorage.setItem("company_name",null===(a=l.data.item.user)||void 0===a?void 0:a.company_name),localStorage.setItem("parent_id",null===(s=l.data.item.user)||void 0===s?void 0:s.parent_id),localStorage.setItem("token",null===(n=l.data.item.token)||void 0===n?void 0:n.token),localStorage.setItem("role",null===(r=l.data.item.user)||void 0===r?void 0:r.role_id),localStorage.setItem("name",null===(i=l.data.item.user)||void 0===i?void 0:i.name),localStorage.setItem("user_id",null===(c=l.data.item.user)||void 0===c?void 0:c.id),window.location.reload();else o.b.error(l.data.message)}catch(l){console.log(l),o.b.error("Something went wrong. Please try again later")}},H=()=>{A.length<6?o.b.error("Please enter a valid OTP"):window.confirmationResult.confirm(A).then((e=>{const t=e.user.uid;U(t)})).catch((e=>{o.b.error("Invalid OTP entered")}))};return Object(I.jsxs)("div",{className:"h-100",style:k,children:[Object(I.jsx)("div",{id:"recaptcha-container"}),Object(I.jsxs)("div",{style:C,children:[" ",Object(I.jsx)("img",{src:h,alt:"..."})]}),Object(I.jsxs)("div",{className:"row d-flex h-100",style:{paddingTop:"110px"},children:[Object(I.jsx)("div",{style:{marginTop:"80px",width:"50%"},className:"d-flex flex-column justify-content-start align-items-center",children:Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{className:"d-flex justify-content-center mb-4",children:Object(I.jsx)(g.v,{})}),Object(I.jsx)("h2",{className:"text-center mt-2",children:1===t?"LOGIN":"Enter OTP"}),Object(I.jsxs)("p",{className:"text-center",children:[" ",1===t?"Please enter your phone number below to get started.":`Please enter 6 digit OTP sent to ${y} ${j} below.`]}),1===t&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("h4",{style:{marginTop:"2.7rem"},className:"font-bolder ",children:"Phone Number"}),Object(I.jsx)(i.a,{addonBefore:G,onChange:e=>x(e.target.value),value:j}),Object(I.jsx)(c.a,{style:{backgroundColor:"#3CA6C1",color:"white",marginTop:"4rem",marginBottom:"1.9rem"},className:"w-100",onClick:L,children:"Continue"})]}),2===t&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("h4",{style:{marginTop:"2.7rem"},className:"font-bolder ",children:"OTP Verification"}),Object(I.jsx)(O.a,{className:"OtpInput",value:A,onChange:e=>F(e),autoFocus:!0,OTPLength:6,isNumberInput:!0,shouldAutoFocus:!0,isInputNum:!0,inputStyle:{border:"1px solid #ccc",borderRadius:"4px",padding:"0.5rem",boxShadow:"0 0 5px rgba(0, 0, 0, 0.2)",outline:"none"},containerStyle:{justifyContent:"space-between"},inputContainerStyle:{margin:"0 0.5rem"},inputClassName:"custom-otp-input",disabled:!1,hasErrored:!1,errorStyle:{borderColor:"red"},focusStyle:{borderColor:"blue"},onComplete:e=>H()}),Object(I.jsxs)("p",{className:"text-center mt-2",children:["Don't receive OTP?"," ",Object(I.jsx)("span",{style:{color:"#3CA6C1",cursor:"pointer"},className:"text-center",onClick:()=>{L()},children:"Request Again"})]}),Object(I.jsx)(c.a,{style:{backgroundColor:"#3CA6C1",color:"white",marginTop:"4rem",marginBottom:"1.9rem"},className:"w-100",onClick:()=>H(),children:"Submit"})]}),Object(I.jsx)("p",{className:"text-center",children:"By continuing, you agree to the JD Works Terms & Services"}),Object(I.jsx)("a",{className:"text-center d-block w-100",href:"#",children:"Terms & Services"})]})}),Object(I.jsx)("div",{style:{width:"50%"},className:"loginRightSlider",children:Object(I.jsx)("div",{children:Object(I.jsxs)(p.a,{dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:2e3,arrows:!1,children:[Object(I.jsx)("div",{children:Object(I.jsxs)("div",{style:{backgroundImage:"url(/img/others/Rectanglepurple.svg)",backgroundRepeat:"no-repeat",backgroundSize:"cover",padding:"5rem",backgroundPosition:"center"},children:[Object(I.jsx)("h2",{className:"text-white mt-2",style:{textTransform:"uppercase",fontSize:"1.6rem"},children:"Machine conditions monitoring get easy"}),Object(I.jsx)("p",{className:"text-white mb-5",style:{fontSize:"1rem",width:"80%",lineHeight:"18px",fontWeight:"100"},children:"Enhancing productivity and efficiency with smart mobile applications"}),Object(I.jsx)("img",{style:{width:"65%",margin:"auto"},src:"/img/others/machinefirst.svg",alt:"..."})]})}),Object(I.jsx)("div",{children:Object(I.jsxs)("div",{style:{backgroundImage:"url(/img/others/Rectanglegreen.svg)",backgroundRepeat:"no-repeat",backgroundSize:"cover",padding:"5rem",backgroundPosition:"center"},children:[Object(I.jsx)("h2",{className:"text-white mt-2",style:{textTransform:"uppercase",fontSize:"1.6rem",width:"80%"},children:"Get ON-SITE MAINTENANCE SERVICES"}),Object(I.jsxs)("p",{className:"text-white mb-5",style:{fontSize:"1rem",width:"70%",lineHeight:"18px",fontWeight:"100"},children:["Our expert team deliver best on site maintenance services"," "]}),Object(I.jsx)("img",{style:{width:"65%",margin:"auto"},src:"/img/others/machinetwo.svg",alt:"..."})]})}),Object(I.jsx)("div",{children:Object(I.jsxs)("div",{style:{backgroundImage:"url(/img/others/Rectangleorange.svg)",backgroundRepeat:"no-repeat",backgroundSize:"cover",width:"100%",padding:"5rem",height:"100%"},children:[Object(I.jsx)("h2",{className:"text-white mt-2",style:{textTransform:"uppercase",fontSize:"1.6rem",width:"80%"},children:"Get INSTANT QUOTATION ON INQURIY"}),Object(I.jsx)("p",{className:"text-white mb-5",style:{fontSize:"1rem",width:"70%",lineHeight:"18px",fontWeight:"100"},children:"Generate quick quotation for your problems you inquire."}),Object(I.jsx)("img",{style:{width:"65%",margin:"auto"},src:"/img/others/machinethree.svg",alt:"..."})]})})]})})})]}),Object(I.jsx)(l.a,{title:"Sign Up",visible:f,onOk:()=>{b.submit()},onCancel:()=>{T(!1)},children:Object(I.jsxs)(r.a,{layout:"vertical",form:b,onFinish:async e=>{M||o.b.error("Please select a company name"),console.log(e,M),U({phoneCode:y,phoneNo:j,name:e.name,company_name:M,email:e.email,nric_fin_number:e.nric_fin_number})},children:[Object(I.jsx)(r.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input your name!"}],children:Object(I.jsx)(i.a,{})}),Object(I.jsxs)(r.a.Item,{label:"Company Name",children:[Object(I.jsx)(d.a,{options:E,onSearch:async e=>{if(e){q(!0);try{const t=await v.axiosInstance.post("/api/app/auth/searchExistingCompanies",{search:e});console.log(t.data.items),z(t.data.items.map((e=>({value:e.company_name}))))}catch(t){console.error("Error fetching companies:",t)}finally{q(!1)}}},onSelect:e=>B(e),onChange:e=>B(e),value:M,children:Object(I.jsx)(i.a,{placeholder:"Search or enter company name"})}),_&&Object(I.jsx)(m.a,{size:"small",style:{marginLeft:10}})]}),Object(I.jsx)(r.a.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please input your email"},{type:"email",message:"Please enter a valid email!"}],children:Object(I.jsx)(i.a,{prefix:Object(I.jsx)(S.a,{className:"text-primary"})})}),Object(I.jsx)(r.a.Item,{name:"nric_fin_number",label:"NRIC/FIN Number",rules:[{required:!0,message:"Please input your NRIC/FIN number!"},{pattern:/^[STFG]\d{7}[A-Z]$/,message:"Please enter a valid NRIC/FIN number!"}],children:Object(I.jsx)(i.a,{})})]})})]})}}}]);
//# sourceMappingURL=50.835443b4.chunk.js.map